<?php/*  Plugin Name: SeoSiti Etichette  Plugin URI:  Description: Gestione delle etichette per Estense Etichette, dipende da SeoSiti Framework  Text Domain: seositi-etichette  Domain Path: /languages  Version: 1.2  Author: SeoSiti Developing Team  Author URI: https://www.seositimarketing.it/  License: GPLv2 or later *///indico la cartella dove è contenuto il pluginrequire_once (dirname(__FILE__) . '/seositi-etichette.php');/** INCLUSIONE LIBRERIE **/require_once(ABSPATH.'wp-admin/includes/user.php'); //definizioni per la cancellazione di un utenterequire_once(ABSPATH.'wp-load.php'); //definizioni per le funzionalità di creazione paginarequire_once 'assets/definizioni.php'; //definizioni dei campi e delle stringherequire_once 'assets/initialize_DB.php'; //inizializzazione del databaserequire_once 'assets/classes/classes.php'; //definizione delle classi require_once 'assets/functions.php'; //lista di funzioni specifiche del pluginrequire_once 'assets/shortcodes.php'; //lista degli shortcode da integrare /** ATTIVAZIONE DEL PLUGIN **/register_activation_hook(__FILE__, 'activate_etichette_plugin');function activate_etichette_plugin(){        //E' necessario che sia attivato il plugin SeoSiti Framework    if(!is_plugin_active('seositi-framework/seositi-framework.php') and current_user_can('activate_plugins')){        //stop activation redirect and show error        wp_die('Etichette necessita l\'attivazione di SeoSiti Framework.<br><a href="'.admin_url('plugins.php').'">Torna indietro</a>');    }    else{        //con seositi framework attivo si può procedere alla creazione del database        \etichette\install_etichette_db();     }  }/** DEATTIVAZIONE DEL PLUGIN **/register_deactivation_hook(__FILE__, 'deactivate_etichette_plugin');function deactivate_etichette_plugin(){    \etichette\delete_etichette_db();}//INSERIMENTO CSS E JSadd_action('wp_enqueue_scripts', 'register_public_etichette_css');add_action('admin_enqueue_scripts', 'register_public_etichette_css');function register_public_etichette_css(){   wp_register_style('etichette_styles', plugins_url('css/styles.css', __FILE__));    wp_enqueue_style('etichette_styles');    }add_action( 'wp_enqueue_scripts', 'register_public_etichette_js' );add_action( 'admin_enqueue_scripts', 'register_public_etichette_js' );function register_public_etichette_js(){    wp_register_script('etichette-scripts', plugins_url('seositi-etichette/js/scripts.js'), array('jquery'), '1.0', false);     wp_enqueue_script('etichette-scripts'); }//Aggiungo il menu del Pluginfunction add_etichette_admin_menu(){    add_menu_page('SeoSiti Etichette', 'Lista Etichette', 'manage_options', 'seositi-etichette', '\etichette\paginaListaEtichette', plugins_url('images/favicon.png', __FILE__), 6);    add_submenu_page('seositi-etichette', 'Aggiungi Etichetta', 'Aggiungi Etichetta', 'manage_options', 'aggiungi-etichetta', '\etichette\paginaAggiungiEtichetta');    add_submenu_page('seositi-etichette', 'Lista Template', 'Lista Template', 'manage_options', 'lista-template', '\etichette\paginaListaTemplate');    add_submenu_page('seositi-etichette', 'Aggiungi Template', 'Aggiungi Template', 'manage_options', 'aggiungi-template', '\etichette\paginaAggiungiTemplate');    add_submenu_page('seositi-etichette', 'Lista Clienti', 'Lista Clienti', 'manage_options', 'lista-clienti', '\etichette\paginaListaClienti');    add_submenu_page('seositi-etichette', 'Aggiungi Cliente', 'Aggiungi Cliente', 'manage_options', 'aggiungi-cliente', '\etichette\paginaAggiungiCliente');        add_submenu_page('seositi-etichette', 'Lista Categorie', 'Lista Categorie', 'manage_options', 'lista-categorie', '\etichette\paginaListaCategorie');    add_submenu_page('seositi-etichette', 'Aggiungi Categoria', 'Aggiungi Categoria', 'manage_options', 'aggiungi-categoria', '\etichette\paginaAggiungiCategoria');    add_submenu_page('seositi-etichette', 'Traduzioni', 'Traduzioni', 'manage_options', 'attiva-traduzioni', '\etichette\paginaTraduzioni');}//registro il menuadd_action('admin_menu', 'add_etichette_admin_menu');//Aggiungo la pagina del cliente (nascosta nel menu)add_action('admin_menu', 'register_ClienteDettaglioPage');function register_ClienteDettaglioPage(){    add_submenu_page(        null,        'Hidden!',        'Hidden!',        'manage_options',        'dettaglio-cliente',        '\etichette\addClienteDettaglioPage'    );}//Aggiungo la pagina della categoria (nascosta nel menu)add_action('admin_menu', 'register_CategoriaDettaglioPage');function register_CategoriaDettaglioPage(){    add_submenu_page(        null,        'Hidden!',        'Hidden!',        'manage_options',        'dettaglio-categoria',        '\etichette\addCategoriaDettaglioPage'    );}//Aggiungo la pagina del template (nascosa nel menu)add_action('admin_menu', 'register_TemplateDettaglioPage');function register_TemplateDettaglioPage(){    add_submenu_page(        null,        'Hidden!',        'Hidden!',        'manage_options',        'dettaglio-template',        '\etichette\addTemplateDettaglioPage'    );}//Aggiungo la pagina del template (nascosa nel menu)add_action('admin_menu', 'register_EtichettaDettaglioPage');function register_EtichettaDettaglioPage(){    add_submenu_page(        null,        'Hidden!',        'Hidden!',        'manage_options',        'dettaglio-etichetta',        '\etichette\addEtichettaDettaglioPage'    );}//SHORTCODEadd_shortcode('etichetta', '\etichette\addEtichetta');add_shortcode('etichetteByCategoria', '\etichette\showEtichetteByCategoria');